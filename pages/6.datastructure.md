
# Data structure: array

````md magic-move

```tsx
const schema = yup
  .object({
    firstName: yup.string().required(),
    lastName: yup.string(),
    email: yup.string().email().required(),
    favorite: yup.array(
      yup.string().oneOf(["React", "Angular", "Vue", "Svelte"]).required()
    ),
  })
  .required();
```

```tsx
const schema = yup.object({
  users: yup.array(
    yup
      .object({
        firstName: yup.string().required(),
        lastName: yup.string(),
        email: yup.string().email().required(),
        favorite: yup.array(
          yup.string().oneOf(["React", "Angular", "Vue", "Svelte"]).required()
        ),
      })
      .required()
  ),
});
```


```tsx
export default function Form() {
  const { handleSubmit, register, control } = RHF.useForm({
    resolver: yupResolver(schema),
  });

  return (
    <form>
      <M.TextInput label="First name" {...register("firstName")} />
      <M.TextInput label="Last name" {...register("lastName")} />
      <M.TextInput label="Email" {...register("email")} />
      <M.Button type="submit">Submit</M.Button>
    </form>
  );
}
```


```tsx
export default function Form() {
  const { handleSubmit, register, control } = RHF.useForm({
    resolver: yupResolver(schema),
  });

  const { fields } = useFieldArray({ control, name: "users" });

  return (
    <form>
      {fields.map((field, index) => (
        <M.TextInput label="First name" {...register("firstName")} />
        <M.TextInput label="Last name" {...register("lastName")} />
        <M.TextInput label="Email" {...register("email")} />
      ))}
      <M.Button type="submit">Submit</M.Button>
    </form>
  );
}
```

```tsx
export default function Form() {
  // ...

  const { fields } = useFieldArray({ control, name: "users" });

  return (
    <form>
      {fields.map((field, index) => (
        <M.TextInput label="First name" {...register(`users.${index}.firstName`)} />
        <M.TextInput label="Last name" {...register(`users.${index}.lastName`)} />
        <M.TextInput label="Email" {...register(`users.${index}.email`)} />
      ))}
      <M.Button type="submit">Submit</M.Button>
    </form>
  );
}
```

```tsx
export default function Form() {
  // ...

  // type error: unknown index
  const { field } = RHF.useController({ name: `users.${index}.favorite`, control });

  return (
    <form>
      {fields.map((field, index) => (
        <M.TextInput label="First name" {...register(`users.${index}.firstName`)} />
        <M.TextInput label="Last name" {...register(`users.${index}.lastName`)} />
        <M.TextInput label="Email" {...register(`users.${index}.email`)} />
        <M.MultiSelect label="Favorite framework" {...field} />
      ))}
      <M.Button type="submit">Submit</M.Button>
    </form>
  );
}
```

```tsx
export function UserInfo({ index }:{ index: number }) {
  const { register } = RHF.useFormContext<Values>();
  return (
    <>
        <M.TextInput label="First name" {...register(`users.${index}.firstName`)} />
        <M.TextInput label="Last name" {...register(`users.${index}.lastName`)} />
        <M.TextInput label="Email" {...register(`users.${index}.email`)} />
    </>
  );
}
```

```tsx
function UserPreferences({ index }:{ index: number}) {
  const { watch } = RHF.useFormContext<Values>();
  const { field } = RHF.useController<Values>({ name: `users.${index}.favorite` });
  const favoriteValue = watch(`users.${index}.favorite`);
  const showMessage = favoriteValue.includes("Angular");

  return (
    <>
      <M.MultiSelect label="Favorite framework" {...field}/>
      {showMessage && <M.Alert>Really? Still in 2025?</M.Alert>}
    </>
  );
}
```

```tsx
export default function Form() {
  // ...

  const { fields } = useFieldArray({ control, name: "users" });

  return (
    <form>
      {fields.map((field, index) => (
        <UserInfo index={index} />
        <UserPreferences index={index} />
      ))}
      <M.Button type="submit">Submit</M.Button>
    </form>
  );
}
```

````
<br>

<v-click at="9">Say goodbye to composability ðŸ‘‹</v-click>
<br>
<v-click at="10">Imagine dealing with arrays of arrays ðŸ¤”</v-click>

---

# Data structure: array

````md magic-move

```tsx

```

````