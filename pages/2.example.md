# A simple example

````md magic-move

```tsx
import * as M from "@mantine/core";
import * as RHF from "react-hook-form";

export default function Form() {
  const { handleSubmit, register } = RHF.useForm();

  return (
    <form onSubmit={handleSubmit((_) => console.log(_))}>
      <M.TextInput label="First name" {...register("firstName")} />
      <M.TextInput label="Last name" {...register("lastName")} />
      <M.TextInput label="Email" {...register("email")} />
      <M.Button type="submit">Submit</M.Button>
    </form>
  );
}
```

<!-- add MultiSelect controlled field -->

```tsx {2-4,11}
export default function Form() {
  const { handleSubmit, register, control } = RHF.useForm();
  const { field } = RHF.useController({ name: "favorite", control });
  const options = ["React", "Angular", "Vue", "Svelte"];

  return (
    <form onSubmit={handleSubmit((_) => console.log(_))}>
      <M.TextInput label="First name" {...register("firstName")} />
      <M.TextInput label="Last name" {...register("lastName")} />
      <M.TextInput label="Email" {...register("email")} />
      <M.MultiSelect label="Favorite framework" data={options} {...field} />
      <M.Button type="submit">Submit</M.Button>
    </form>
  );
}
```

<!-- create validation schema using Yup -->

```tsx {1-12}
import * as yup from "yup";

const schema = yup
  .object({
    firstName: yup.string().required(),
    lastName: yup.string(),
    email: yup.string().email().required(),
    favorite: yup.array(
      yup.string().oneOf(["React", "Angular", "Vue", "Svelte"]).required()
    ),
  })
  .required();

export default function Form() {
  const { handleSubmit, register, control } = RHF.useForm();
  const { field } = RHF.useController({ name: "favorite", control });
  const options = ["React", "Angular", "Vue", "Svelte"];

  return (
    <form onSubmit={handleSubmit((_) => console.log(_))}>
      <M.TextInput label="First name" {...register("firstName")} />
      <M.TextInput label="Last name" {...register("lastName")} />
      <M.TextInput label="Email" {...register("email")} />
      <M.MultiSelect label="Favorite framework" data={options} {...field} />
      <M.Button type="submit">Submit</M.Button>
    </form>
  );
}
```

<!-- use schema via resolver props -->

```tsx {1-7}
import { yupResolver } from "@hookform/resolvers/yup";
import schema from './schema';

export default function Form() {
  const { handleSubmit, register, control } = RHF.useForm({
    resolver: yupResolver(schema),
  });
  const { field } = RHF.useController({ name: "favorite", control });
  const options = ["React", "Angular", "Vue", "Svelte"];

  return (
    <form onSubmit={handleSubmit((_) => console.log(_))}>
      <M.TextInput label="First name" {...register("firstName")} />
      <M.TextInput label="Last name" {...register("lastName")} />
      <M.TextInput label="Email" {...register("email")} />
      <M.MultiSelect label="Favorite framework" data={options} {...field} />
      <M.Button type="submit">Submit</M.Button>
    </form>
  );
}
```

<!-- plug errors -->

```tsx {2,10-13}
export default function Form() {
  const { handleSubmit, register, control, formState: { errors } } = RHF.useForm({
    resolver: yupResolver(schema),
  });
  const { field } = RHF.useController({ name: "favorite", control });
  const options = ["React", "Angular", "Vue", "Svelte"];

  return (
    <form onSubmit={handleSubmit((_) => console.log(_))}>
      <M.TextInput label="First name" {...register("firstName")} error={errors?.firstName?.message} />
      <M.TextInput label="Last name" {...register("lastName")} error={errors?.lastName?.message} />
      <M.TextInput label="Email" {...register("email")} error={errors?.email?.message} />
      <M.MultiSelect label="Favorite framework" data={options} {...field} error={errors?.favorite?.message} />
      <M.Button type="submit">Submit</M.Button>
    </form>
  );
}
```

<!-- interaction with API -->

```tsx {1,4,6,12,17}
import * as API from "./api";

export default function Form() {
  const { handleSubmit, register, control, formState: { errors, isSubmitting } } = RHF.useForm({
    resolver: yupResolver(schema),
    defaultValues: API.getFromApi,
  });
  const { field } = RHF.useController({ name: "favorite", control });
  const options = ["React", "Angular", "Vue", "Svelte"];

  return (
    <form onSubmit={handleSubmit(API.sendToApi)}>
      <M.TextInput label="First name" {...register("firstName")} error={errors?.firstName?.message} />
      <M.TextInput label="Last name" {...register("lastName")} error={errors?.lastName?.message} />
      <M.TextInput label="Email" {...register("email")} error={errors?.email?.message} />
      <M.MultiSelect label="Favorite framework" data={options} {...field} error={errors?.favorite?.message} />
      <M.Button type="submit" loading={isSubmitting}>Submit</M.Button>
    </form>
  );
}
```

<!-- Add clear button -->

```tsx {2,6,16}
export default function Form() {
  const { handleSubmit, register, control, formState: { errors, isSubmitting }, reset } = RHF.useForm({
    resolver: yupResolver(schema),
    defaultValues: API.getFromApi,
  });
  const resetValues = { firstName: "", lastName: "", email: "", favorite: [] };
  const { field } = RHF.useController({ name: "favorite", control });
  const options = ["React", "Angular", "Vue", "Svelte"];

  return (
    <form onSubmit={handleSubmit(API.sendToApi)}>
      <M.TextInput label="First name" {...register("firstName")} error={errors?.firstName?.message} />
      <M.TextInput label="Last name" {...register("lastName")} error={errors?.lastName?.message} />
      <M.TextInput label="Email" {...register("email")} error={errors?.email?.message} />
      <M.MultiSelect label="Favorite framework" data={options} {...field} error={errors?.favorite?.message} />
      <M.Button type="reset" onClick={() => reset(resetValues)}>Clear</M.Button>
      <M.Button type="submit" loading={isSubmitting}>Submit</M.Button>
    </form>
  );
}
```

<!-- Display alert on Angular -->

```tsx {2,9,10,18}
export default function Form() {
  const { handleSubmit, register, control, formState: { errors, isSubmitting }, reset, watch } = RHF.useForm({
    resolver: yupResolver(schema),
    defaultValues: API.getFromApi,
  });
  const resetValues = { firstName: "", lastName: "", email: "", favorite: [] };
  const { field } = RHF.useController({ name: "favorite", control });
  const options = ["React", "Angular", "Vue", "Svelte"];
  const favoriteValue = watch("favorite");
  const showMessage = favoriteValue.includes("Angular");

  return (
    <form onSubmit={handleSubmit(API.sendToApi)}>
      <M.TextInput label="First name" {...register("firstName")} error={errors?.firstName?.message} />
      <M.TextInput label="Last name" {...register("lastName")} error={errors?.lastName?.message} />
      <M.TextInput label="Email" {...register("email")} error={errors?.email?.message} />
      <M.MultiSelect label="Favorite framework" data={options} {...field} error={errors?.favorite?.message} />
      {showMessage && <M.Alert>Really? Still in 2025?</M.Alert>}
      <M.Button type="reset" onClick={() => reset(resetValues)}>Clear</M.Button>
      <M.Button type="submit" loading={isSubmitting}>Submit</M.Button>
    </form>
  );
}
```

<!-- Split in multiple files / components -->

```tsx {1,2,12,14,15,19}
import UserInfo from "./UserInfo";
import UserPreferences from "./UserPreferences";

export default function Form() {
  const formMethods = RHF.useForm({
    resolver: yupResolver(schema),
    defaultValues: API.getFromApi,
  });
  const { handleSubmit, formState: { isSubmitting }, reset } = formMethods;
  const resetValues = { firstName: "", lastName: "", email: "", favorite: [] };
  return (
    <RHF.FormProvider {...formMethods}>
      <form onSubmit={handleSubmit(API.sendToApi)}>
        <UserInfo />
        <UserPreferences />
        <M.Button type="reset" onClick={() => reset(resetValues)}>Clear</M.Button>
        <M.Button type="submit" loading={isSubmitting}>Submit</M.Button>
      </form>
    </RHF.FormProvider>
  );
}
```

```tsx
export function UserInfo() {
  const {
    register,
    formState: { errors },
  } = RHF.useFormContext<Values>();
  return (
    <>
      <M.TextInput label="First name" {...register("firstName")} error={errors?.firstName?.message} />
      <M.TextInput label="Last name" {...register("lastName")} error={errors?.lastName?.message} />
      <M.TextInput label="Email" {...register("email")} error={errors?.email?.message} />
    </>
  );
}
```

```tsx
function UserPreferences() {
  const {
    watch,
    formState: { errors },
  } = RHF.useFormContext<Values>();
  const { field } = RHF.useController<Values>({ name: "favorite" });
  field.value;
  const options = ["React", "Angular", "Vue", "Svelte"];
  const favoriteValue = watch("favorite");
  const showMessage = favoriteValue.includes("Angular");

  return (
    <>
      <M.MultiSelect label="Favorite framework" data={options} {...field} error={errors?.favorite?.message} />
      {showMessage && <M.Alert>Really? Still in 2025?</M.Alert>}
    </>
  );
}
```

<!-- the whole thing -->

```tsx
// schema.ts
const schema = yup
  .object({
    firstName: yup.string().required(),
    lastName: yup.string(),
    email: yup.string().email().required(),
    favorite: yup.array(
      yup.string().oneOf(["React", "Angular", "Vue", "Svelte"]).required()
    ),
  })
  .required();

// UserInfo.tsx
export function UserInfo() {
  const {
    register,
    formState: { errors },
  } = RHF.useFormContext<Values>();
  return (
    <>
      <M.TextInput label="First name" {...register("firstName")} error={errors?.firstName?.message} />
      <M.TextInput label="Last name" {...register("lastName")} error={errors?.lastName?.message} />
      <M.TextInput label="Email" {...register("email")} error={errors?.email?.message} />
    </>
  );
}

// UserPreferences.tsx
function UserPreferences() {
  const {
    watch,
    formState: { errors },
  } = RHF.useFormContext<Values>();
  const { field } = RHF.useController<Values>({ name: "favorite" });
  field.value;
  const options = ["React", "Angular", "Vue", "Svelte"];
  const favoriteValue = watch("favorite");
  const showMessage = favoriteValue.includes("Angular");

  return (
    <>
      <M.MultiSelect label="Favorite framework" data={options} {...field} error={errors?.favorite?.message} />
      {showMessage && <M.Alert>Really? Still in 2025?</M.Alert>}
    </>
  );
}

// App.tsx
export default function Form() {
  const formMethods = RHF.useForm({
    resolver: yupResolver(schema),
    defaultValues: API.getFromApi,
  });
  const { handleSubmit, formState: { isSubmitting }, reset } = formMethods;
  const resetValues = { firstName: "", lastName: "", email: "", favorite: [] };
  return (
    <RHF.FormProvider {...formMethods}>
      <form onSubmit={handleSubmit(API.sendToApi)}>
        <UserInfo />
        <UserPreferences />
        <M.Button type="reset" onClick={() => reset(resetValues)}>Clear</M.Button>
        <M.Button type="submit" loading={isSubmitting}>Submit</M.Button>
      </form>
    </RHF.FormProvider>
  );
}
```
````
